diff --git a/tools/build-companion.sh b/tools/build-companion.sh
--- a/tools/build-companion.sh
+++ b/tools/build-companion.sh
@@ -32,39 +32,11 @@ done
 
 SRCDIR=$1
 OUTDIR=$2
+mkdir -p "${OUTDIR}"
+cd "${OUTDIR}"
 
-COMMON_OPTIONS="-DGVARS=YES -DHELI=YES -DLUA=YES -Wno-dev -DCMAKE_BUILD_TYPE=Release"
-if [ "$(uname)" = "Darwin" ]; then
-    COMMON_OPTIONS="${COMMON_OPTIONS} -DCMAKE_OSX_DEPLOYMENT_TARGET='10.15'"
-elif [ "$(uname)" != "Linux" ]; then # Assume Windows and MSYS2
-    if [ "${MSYSTEM,,}" == "mingw32" ]; then # MSYS 32bit detected
-        COMMON_OPTIONS="${COMMON_OPTIONS} -DSDL2_LIBRARY_PATH=/mingw32/bin/"
-    else # fallback to 64bit
-        COMMON_OPTIONS="${COMMON_OPTIONS} -DSDL2_LIBRARY_PATH=/mingw64/bin/"
-    fi
-fi
-
-# Generate EDGETX_VERSION_SUFFIX if not already set
-if [[ -z ${EDGETX_VERSION_SUFFIX} ]]; then
-  gh_type=$(echo "$GITHUB_REF" | awk -F / '{print $2}') #heads|tags|pull
-  if [[ $gh_type = "tags" ]]; then
-    # tags: refs/tags/<tag_name>
-    gh_tag=${GITHUB_REF##*/}
-    export EDGETX_VERSION_TAG=$gh_tag
-  elif [[ $gh_type = "pull" ]]; then
-    # pull: refs/pull/<pr_number>/merge
-    gh_pull_number=PR$(echo "$GITHUB_REF" | awk -F / '{print $3}')
-    export EDGETX_VERSION_SUFFIX=$gh_pull_number
-  elif [[ $gh_type = "heads" ]]; then
-    # heads: refs/heads/<branch_name>
-    gh_branch=${GITHUB_REF##*/}
-    export EDGETX_VERSION_SUFFIX=$gh_branch
-  fi
-fi
-
-rm -rf build
-mkdir build
-cd build
+COMMON_OPTIONS="$3"
+export EDGETX_VERSION_SUFFIX="$4"
 
 declare -a simulator_plugins=(x9lite x9lites
                               x7 x7access
@@ -99,8 +71,8 @@ if [ "$(uname)" = "Darwin" ]; then
     cmake --build native -j"${JOBS}" --target package
     cp native/*.dmg "${OUTDIR}"
 elif [ "$(uname)" = "Linux" ]; then
-    cmake --build native -j"${JOBS}" --target package
-    cp native/*.AppImage "${OUTDIR}"
+    cmake --build native -j"${JOBS}" --target companion
+    cmake --build native -j"${JOBS}" --target simulator
 else
     cmake --build native --target installer
     cp native/companion/*.exe "${OUTDIR}"
